(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"1ca4":function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",{staticClass:"q-pa-xl"},[t("q-toolbar",{staticClass:"bg-white"},[t("q-toolbar-title",{staticClass:"text-weight-bold"},[a._v("Daftar Input Penjadwalan")]),t("q-space"),t("q-input",{staticClass:"q-mr-md",attrs:{dense:"",filled:"","input-class":"text-right",label:"pencarian",unelevated:""},model:{value:a.keyword,callback:function(e){a.keyword=e},expression:"keyword"}}),t("q-btn",{staticClass:"q-mr-md",attrs:{to:"/app/sch_in/create",color:"green",icon:"add",label:"tambah",unelevated:""}}),t("q-btn",{attrs:{color:"blue",icon:"play_arrow",label:"jadwalkan",unelevated:""},on:{click:function(e){a.scheduleDialog=!0}}})],1),t("q-dialog",{model:{value:a.scheduleDialog,callback:function(e){a.scheduleDialog=e},expression:"scheduleDialog"}},[t("q-card",{staticStyle:{"min-width":"400px"}},[t("q-card-section",[t("div",{staticClass:"text-h6"},[a._v("Input Parameter PSO")])]),t("q-card-section",[t("q-input",{staticClass:"q-mb-md",attrs:{type:"number",min:"2",label:"Jumlah Particle"},model:{value:a.scheduleParams.n_particles,callback:function(e){a.$set(a.scheduleParams,"n_particles",a._n(e))},expression:"scheduleParams.n_particles"}})],1),t("q-card-section",[t("q-btn",{attrs:{dark:"",color:"blue",icon:"play_circle",label:"jalankan"},on:{click:a.createTask}})],1)],1)],1),t("div",{staticClass:"q-my-md q-pa-sm bg-white"},[t("div",[a._v("Total Jam: "+a._s(a.total_jam))])]),t("q-table",{staticClass:"q-mt-md",attrs:{data:a.filtered,columns:a.columns,"row-key":"id",flat:"","rows-per-page-options":[0]},scopedSlots:a._u([{key:"body-cell-actions",fn:function(e){return[t("q-td",{attrs:{props:e}},[t("q-btn",{staticClass:"q-mr-md",attrs:{to:"/app/mp/"+e.row.id+"/edit",dense:"",unelevated:"",label:"edit",color:"blue",icon:"edit",size:"sm"}}),t("q-btn",{attrs:{dense:"",unelevated:"",label:"hapus",color:"red",icon:"delete",size:"sm"},on:{click:function(t){return a.confirmDelete(e.row.id)}}})],1)]}}])})],1)},l=[],n=(t("13d5"),t("e6cf"),t("ded3")),i=t.n(n),o=t("2f62"),r={name:"ListGuru",data:()=>({scheduleDialog:!1,scheduleParams:{w:.65,c1:1.5,c2:2,n_particles:5,n_hourse:40,threshold:20},items:[],errors:null,keyword:"",columns:[{name:"mp",required:!0,label:"Mata Pelajaran",align:"left",field:"mp_nama",sortable:!0},{name:"guru",required:!0,label:"Guru",align:"left",field:"guru_nama",sortable:!0},{name:"jam",required:!0,label:"Total Jam",align:"left",field:"jam",sortable:!0},{name:"actions",field:"id"}]}),computed:i()(i()({},Object(o["b"])({user:a=>a.user})),{},{filtered(){const a=this.keyword.toUpperCase();return this.items.filter((e=>e.mp_nama.toUpperCase().includes(a)||e.guru_nama.toUpperCase().includes(a)))},total_jam(){return console.log(this.items.map((a=>a.jam))),this.items.map((a=>a.jam)).reduce(((a,e)=>a+e),0)}}),methods:{confirmDelete(a){const e=this.items.find((e=>e.id==a));if(!a)throw new Error(`item with id=${a} can't be found`);this.$q.dialog({dark:!0,title:"Konfirmasi",message:`Anda akan menghapus data mata pelajaran ${e.nama}`,cancel:!0,persistent:!0}).onOk((()=>{this.deleteItem(a)}))},async deleteItem(a){const e=`/mp/${a}`;try{await this.$api.delete(e),this.$q.notify({message:"sukses menghapus data mata pelajaran",color:"green"})}catch(t){console.log(t),this.$q.notify({message:"gagal menghapus data mata pelajaran",color:"red"})}finally{this.loadItems()}},async loadItems(){const a={id_app_user:this.user.id};try{this.$q.loading.show({delay:500});const e=await this.$api.get("/input_sch",{params:a});this.items=e.data}catch(e){console.log(e),this.errors="terjadi kesalahan"}finally{this.$q.loading.hide()}},async createTask(){const a={id_app_user:this.user.id},e=i()({},this.scheduleParams);try{const t=await this.$api.post("/scheduler_task",e,{params:a});console.log(t.data),this.$q.notify({color:"green-6",message:"sukses menjalankan penjadwalan. Silahkan menunggu"})}catch(t){console.log(t),this.$q.notify({color:"red-6",message:"gagal menjalankan penjadwalan"})}finally{this.scheduleDialog=!1}}},mounted(){this.loadItems()}},c=r,d=t("2877"),m=t("9989"),u=t("65c6"),p=t("6ac5"),h=t("2c91"),g=t("27f9"),b=t("9c40"),f=t("24e8"),q=t("f09f"),w=t("a370"),k=t("eaac"),_=t("db86"),y=t("eebe"),j=t.n(y),v=Object(d["a"])(c,s,l,!1,null,null,null);e["default"]=v.exports;j()(v,"components",{QPage:m["a"],QToolbar:u["a"],QToolbarTitle:p["a"],QSpace:h["a"],QInput:g["a"],QBtn:b["a"],QDialog:f["a"],QCard:q["a"],QCardSection:w["a"],QTable:k["a"],QTd:_["a"]})}}]);